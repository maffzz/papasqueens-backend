receivePreparedOrder:
  handler: delivery-svc/receive_prepared_order.handler
  package:
    include:
      - ./**
  events:
    - eventBridge:
        eventBus: papasqueens-event-bus
        pattern:
          detail-type: ["Order.Prepared"]

assignDelivery:
  handler: delivery-svc/assign_delivery.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: delivery/assign
        method: post
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

updateDeliveryStatus:
  handler: delivery-svc/update_delivery_status.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: delivery/{id_delivery}/status
        method: patch
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

handoffOrder:
  handler: delivery-svc/handoff_order.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: delivery/orders/{id_order}/handoff
        method: post
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

confirmDelivered:
  handler: delivery-svc/confirm_delivered.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: delivery/orders/{id_order}/delivered
        method: post
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

getDeliveryStatus:
  handler: delivery-svc/get_delivery_status.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: delivery/{id_delivery}
        method: get
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

trackRider:
  handler: delivery-svc/track_rider.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: delivery/{id_delivery}/track
        method: get
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

listDeliveries:
  handler: delivery-svc/list_deliveries.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: delivery
        method: get
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

listRiders:
  handler: delivery-svc/list_riders.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: riders
        method: get
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

updateRiderStatus:
  handler: delivery-svc/update_rider_status.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: riders/{id_staff}/status
        method: patch
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

updateRiderLocation:
  handler: delivery-svc/update_rider_location.handler
  package:
    include:
      - ./**
  events:
    - http:
        path: delivery/location
        method: post
        cors:
          origins: ['*']
          headers:
            - Content-Type
            - X-Tenant-Id
            - X-User-Id
            - X-User-Email
            - X-User-Type
            - Authorization

deliveryMetrics:
  handler: delivery-svc/delivery_metrics.handler
  package:
    include:
      - ./**
  events:
    - eventBridge:
        eventBus: papasqueens-event-bus
        pattern:
          detail-type: ["Order.Delivered"]
